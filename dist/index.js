"use strict";var y=require("fs"),g=require("module"),r=require("@esbuild-kit/core-utils"),u=require("get-tsconfig");function d(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var _=d(y),l=d(g);const b=/^\.{0,2}\//,S=/\.[cm]?tsx?$/,i=u.getTsconfig(),j=i==null?void 0:i.config,p=i&&u.createPathsMatcher(i),m=r.installSourceMapSupport(),c=process.versions.node.split(".").map(Number),F=c[0]>=13&&c[1]>=2||c[0]>=12&&c[1]>=20&&c[0]<13&&c[1]<0;function h(e,t){process.send&&process.send({type:"dependency",path:t});let s=_.default.readFileSync(t,"utf8");if(t.endsWith(".cjs")&&F){const o=r.transformDynamicImport(s);o&&(s=r.applySourceMap(o,t,m))}else{const o=r.transformSync(s,t,{tsconfigRaw:j});s=r.applySourceMap(o,t,m)}e._compile(s,t)}const v=l.default._extensions;[".js",".ts",".tsx",".jsx"].forEach(e=>{v[e]=h}),Object.defineProperty(v,".mjs",{value:h,enumerable:!1});const f=l.default._resolveFilename;l.default._resolveFilename=function(e,t,s,o){if(e.startsWith("node:")&&(e=e.slice(5)),p&&!b.test(e)){const n=p(e);for(const a of n)try{return f.call(this,a,t,s,o)}catch{}}if(t&&S.test(t.filename)){const n=r.resolveTsPath(e);if(n)try{return f.call(this,n,t,s,o)}catch(a){if(a.code!=="MODULE_NOT_FOUND")throw a}}return f.call(this,e,t,s,o)};
